<script type="text/discourse-plugin" version="0.8">

/*
  This is an automatically generated file.
  Please make changes in the relevant /src files instead.
*/

!function(e){var n={};function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)r.d(t,o,function(n){return e[n]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=0)}([function(module,exports,__webpack_require__){const _require=eval("require"),{h:h}=_require("virtual-dom"),showModal=_require("discourse/lib/show-modal").default,{detectUnformattedCode:detectUnformattedCode}=__webpack_require__(1);api.modifyClass("model:composer",{ucd_previousWarningIgnored:!1,ucd_shouldPermanentlyDismiss:!1,ucd_checkPermanentlyDismissed:()=>!!localStorage.ucd_warningPermanentlyDismissed,ucd_shouldIgnoreWarning:Ember.computed("ucd_previousWarningIgnored",function(){return this.ucd_previousWarningIgnored||this.ucd_checkPermanentlyDismissed()}),ucd_checkUnformattedCodeDetected:function(){return detectUnformattedCode(this.reply)},cantSubmitPost:Ember.computed("ucd_shouldIgnoreWarning",function(){return!(!this.ucd_checkUnformattedCodeDetected()||this.ucd_shouldIgnoreWarning)||this._super()})}),api.modifyClass("controller:composer",{save(...e){const n=this.model;if(!n.ucd_checkUnformattedCodeDetected()||n.ucd_checkPermanentlyDismissed())return this._super(...e);{const r=showModal("ucdWarningModal",{modalClass:"ucd_warning-modal",model:n}),t=this._super;r.actions.ignoreAndProceed=(()=>{n.set("ucd_previousWarningIgnored",!0),n.ucd_shouldPermanentlyDismiss&&this.ucd_permanentlyDismiss(),this.send("closeModal"),t.call(this,...e)}),r.actions.goBackAndFix=(()=>{n.set("ucd_previousWarningIgnored",!1),this.send("closeModal")})}},ucd_permanentlyDismiss(){localStorage.ucd_warningPermanentlyDismissed="1"},ucd_permanentlyUndismiss(){localStorage.removeItem("ucd_warningPermanentlyDismissed")}})},function(e,n){const r="[$_a-zA-Z][$_a-zA-Z0-9]*",t=`(?:${r}|(?:"(?:[^\\r\\n"\\\\]|\\\\[^\\r\\n])*"|'(?:[^\\r\\n'\\\\]|\\\\[^\\r\\n])*')|-?(?:0|[1-9]\\d*)(?:\\.\\d+)?(?:[eE][+-]?\\d+)?)`,o=[`\\$${r}`,"^\\s*\\.[a-zA-Z-]+",`:${r}`,`${r}(?:_${r})+`,"(?:^|\\s+)(?:\\/\\/|;)","\\/\\*[\\s\\S]+?\\*\\/","('''|\"\"\")[\\s\\S]+?\\1",";\\s*$",`${r}\\(${`(?:\\s*${t}\\s*(?:,\\s*${t}\\s*)*|\\s*)`}\\)`,`${r}\\[\\s*${t}?\\s*\\]`,"^\\s*[{}]\\s*$","\\{\\{.+\\}\\}","[$#]\\{.+\\}","&&|\\|\\||!=|>>|<<|::|\\+\\+|\\+=|-=|\\*=|\\/=|\\|=|&=|\\?=","\\\\['\"ntr0\\\\]","<\\?[^>]*\\?>","<%[^>]*%>"],s=["\x3c!--[\\s\\S]*?--\x3e","<[a-zA-Z-]+[^>]*\\/?>","</[a-zA-Z-]+>","&([0-9a-zA-Z]+);","&#([0-9]{1,7});","&#x([0-9a-fA-F]{1,6});"],{include_html:d,matches_to_ignore:i}=settings,c=o.concat(d?s:[]).map(e=>new RegExp(e,"gm"));e.exports={detectUnformattedCode:e=>{return(e=>{let n=0;for(let r=0;r<c.length;r++){const t=c[r],o=e.match(t);if(o&&(n+=o.length),n>i)return!0}return!1})((e=>[/(^([`~])\2{2,})[^`~\r\n]*\r?\n[\s\S]*?\r?\n\1\2*\s*(?:\r?\n|$)/gm,/(?:^|(?:\r?\n{2,}))\s*(?:(?: {4}|\t).*(?:\r?\n|$))/g,/\[code(?: [^\]\r\n])\][\s\S]*\[\/code\]/gm,/`[^`\r\n]+`/g].reduce((e,n)=>e.replace(n,""),e))(e))}}}]);
</script>

<script type="text/x-handlebars" data-template-name="modal/ucd-warning-modal">
  {{#d-modal-body title=(theme-prefix "warning_modal.title")}}
    {{cook-text (theme-i18n "warning_modal.content")}}
    <label for="ucd_do-not-show-again" class="checkbox-label">
      {{
        input
        type="checkbox"
        id="ucd_do-not-show-again"
        name="ucd_do-not-show-again"
        checked=model.ucd_shouldPermanentlyDismiss
      }}
      {{theme-i18n "warning_modal.do_not_show_again"}}
    </label>
    <div class="action-buttons">
      {{!-- autofocus="true" --}}
      {{
        d-button
        action=(action "goBackAndFix")
        icon="pencil-alt"
        tagName="button"
        class="btn-primary"
        label=(theme-prefix "warning_modal.fix_post")
      }}
      {{
        d-button
        action=(action "ignoreAndProceed")
        tagName="button"
        class=""
        label=(theme-prefix "warning_modal.ignore_and_post_anyway")
      }}
    </div>
  {{/d-modal-body}}
</script>
